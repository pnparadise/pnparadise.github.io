(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("64a9"),i=n.n(s);i.a},"056c":function(e,t,n){},"0870":function(e,t,n){},"199c":function(e,t){},"23be":function(e,t,n){"use strict";var s=n("199c"),i=n.n(s);t["default"]=i.a},2932:function(e,t){e.exports={owner:"pnparadise",defaultRepoKey:"s",repos:{s:{name:"gitbook",scope:"public",type:"article",index:"/README.md"},p:{name:"secretbook",scope:"private",type:"article",index:"/README.md"},book:{name:"secretnote",scope:"private",type:"note",index:""}},publicToken:"040ab84ddddee4c947c9f0f23a546464045f01ad",oauthAppsClientId:"225031944a6bf76a419c",githubAppsClientId:"Iv1.fb87a658b1a64609",oauthUrl:"https://api.ggga.ga/github"}},"311a":function(e,t,n){"use strict";var s=n("caea"),i=n.n(s);i.a},"3dfd":function(e,t,n){"use strict";var s=n("9a6a"),i=n("23be"),o=(n("034f"),n("2877")),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},4678:function(e,t,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),i=n("3dfd"),o=(n("28a5"),n("8c4f")),r=(n("a481"),n("386d"),n("6b54"),n("7f7f"),n("27ae")),a=n("d69d"),c=n.n(a),u=n("4c17"),l=n("2932"),d=n.n(l),p=[],f=[];for(var h in d.a.repos){var m=d.a.repos[h];"article"===m.type&&p.push(h),"note"===m.type&&f.push(h)}var b=p.join("|"),v=f.join("|"),g={repos:d.a.repos,owner:d.a.owner,token:null,repo:null,repoKey:null,publicToken:d.a.publicToken,oauthAppsClientId:d.a.oauthAppsClientId,githubAppsClientId:d.a.githubAppsClientId,oauthUrl:d.a.oauthUrl,client:null,defaultClient:new c.a({auth:"token "+d.a.publicToken}),graphqlClient:null,defaultGraphqlClient:u["graphql"].defaults({headers:{authorization:"token "+d.a.publicToken}})};function y(){return!g.graphqlClient&&g.token&&(g.graphqlClient=u["graphql"].defaults({headers:{authorization:"token "+g.token}})),new Promise((function(e,t){g.graphqlClient?e(g.graphqlClient):e(g.defaultGraphqlClient)}))}function C(){return!g.client&&g.token&&(g.client=new c.a({auth:"token "+g.token})),new Promise((function(e,t){g.client?e(g.client):e(g.defaultClient)}))}function j(e){var t=e.headers["content-type"]||"";-1===t.indexOf("application/vnd.github.v3.raw")&&-1===t.indexOf("application/vnd.github.v3.html")||(e.type="file"),-1!==t.indexOf("application/json")&&(Array.isArray(e.data)?e.type="dir":e.type=e.data&&e.data.type||null)}var w={contents:function(e,t){return C().then((function(n){return n.repos.getContents({owner:g.owner,repo:g.repo.name,path:e,headers:{"If-None-Match":""},mediaType:{format:t||"html"}}).then((function(e){return j(e),e}))}))},remove:function(e){return C().then((function(t){return t.repos.deleteFile({owner:g.owner,repo:g.repo.name,path:e.path,message:"octokit: [master] page deleted",sha:e.sha})}))},commit:function(e){return C().then((function(t){return t.repos.createOrUpdateFile({owner:g.owner,repo:g.repo.name,path:e.path,message:"octokit: [master] page modified",content:r["Base64"].encode(e.text),sha:e.sha})}))},issues:function(e,t,n){return y().then((function(s){return s({query:"query listIssues($owner: String!, $repo: String!, $size: Int!, $after: String, $labels: [String!]) {\n                          repository(name: $repo, owner: $owner) {\n                            issues(first: $size, after: $after, labels: $labels, orderBy:{field: CREATED_AT, direction: DESC}){\n                              edges {\n                                node {\n                                 comments(first: 2){\n                                    totalCount\n                                    pageInfo{\n                                      hasNextPage\n                                      hasPreviousPage\n                                      startCursor\n                                      endCursor\n                                    }\n                                    nodes {\n                                      id\n                                      body\n                                      createdAt\n                                      viewerCanDelete\n                                      viewerCanUpdate\n                                      viewerCanReact\n                                      author{\n                                        login\n                                        avatarUrl\n                                      }\n                                    }\n                                  }\n                                  id\n                                  number\n                                  title\n                                  body\n                                  createdAt\n                                  viewerCanUpdate\n                                  viewerCanReact\n                                  author {\n                                    login\n                                    avatarUrl\n                                  }\n                                }\n                              }\n                              pageInfo {\n                                hasNextPage\n                                hasPreviousPage\n                                startCursor\n                                endCursor\n                              }\n                              totalCount\n                            }\n                          }\n                        }\n                        ",owner:g.owner,repo:g.repo.name,size:n||10,labels:[e],after:t||null})}))},createIssue:function(e,t,n){return C().then((function(s){return s.issues.create({owner:g.owner,repo:g.repo.name,labels:[e],title:t,body:n})}))},deleteIssue:function(e){return y().then((function(t){return t({query:"mutation deleteIssue($clientMutationId: String!, $issueId: String!) {\n                          deleteIssue(input:{clientMutationId:$clientMutationId,issueId:$issueId}) {\n                            clientMutationId \n                            repository {\n                              id\n                            }\n                          }\n                        }",clientMutationId:Math.random().toString(36).slice(-5),issueId:e})}))},updateIssue:function(e,t,n){return y().then((function(s){return s({query:"mutation updateIssue( $id: ID!, $title: String!, $body: String!) {\n                              updateIssue(input:{ id: $id, title: $title, body: $body}) {\n                                issue{\n                                  id\n                                }\n                              }\n                            }",id:e,title:t,body:n})}))},issueComments:function(e,t,n){return y().then((function(s){return s({query:"query queryIssueComment($issueId: ID!, $after: String, $size: Int!) {\n                              node(id: $issueId) {\n                                ... on Issue {\n                                    comments(first: $size, after: $after){\n                                      totalCount\n                                      pageInfo{\n                                        hasNextPage\n                                        hasPreviousPage\n                                        startCursor\n                                        endCursor\n                                      }\n                                      nodes {\n                                        id\n                                        body\n                                        createdAt\n                                        viewerCanDelete\n                                        viewerCanUpdate\n                                        viewerCanReact\n                                        author{\n                                          login\n                                          avatarUrl\n                                        }\n                                      }\n                                    }\n                                  }\n                              }\n                            }\n                            ",issueId:e,after:t||null,size:n||10})}))},createIssueComment:function(e,t){return y().then((function(n){return n({query:"mutation createIssueComment($clientMutationId: String!, $issueId: ID!, $body: String!) {\n                              addComment(input: {clientMutationId: $clientMutationId, subjectId: $issueId, body: $body}) {\n                                subject {\n                                  id\n                                }\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),issueId:e,body:t})}))},deleteIssueComment:function(e){return y().then((function(t){return t({query:"mutation deleteIssueCommentInput($clientMutationId: String!, $commentId: ID!) {\n                              deleteIssueComment(input: {clientMutationId: $clientMutationId, id: $commentId}) {\n                                clientMutationId\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),commentId:e})}))},updateIssueComment:function(e,t){return y().then((function(n){return n({query:"mutation updateIssueComment($clientMutationId: String!, $commentId: ID!, $body: String!) {\n                              updateIssueComment(input: {clientMutationId: $clientMutationId, id: $commentId, body: $body}) {\n                                 issueComment{\n                                    id\n                                 }\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),commentId:e,body:t})}))},user:function(){return C().then((function(e){return e.users.getAuthenticated()}))},search:function(e){return C().then((function(t){return t.search.code({q:e.q+"+repo:"+g.owner+"/"+g.repo.name,page:e.page,per_page:e.perPage,mediaType:{format:"text-match+json"}})}))},encode:function(e){return r["Base64"].encodeURI(e)},decode:function(e){return r["Base64"].decode(e)},parentDir:function(e){return e.replace(/\/?([^/]+\/?)?$/,"")},defaultRepoKey:function(){return d.a.defaultRepoKey},repoIndexPath:function(e){return"/"+d.a.repos[e].type+"/"+e+d.a.repos[e].index},routePath:function(e){return"/"+g.repo.type+"/"+g.repoKey+(e&&"/"+e||g.repo.index)},repo:function(e){g.repoKey=e,g.repo=d.a.repos[e]},authorized:function(e){g.token=e,g.client=null,g.graphqlClient=null},listNotes:function(){return y().then((function(e){return e({query:'query listNotes($owner: String!, $repo: String!) {\n                          repository(name: $repo, owner: $owner) {\n                            object(expression: "master:") {\n                              ... on Tree {\n                                entries {\n                                  name\n                                  object {\n                                    ... on Blob {\n                                      oid\n                                      text\n                                    }\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }',owner:g.owner,repo:g.repo.name})}))}},k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen"},[n("div",{staticClass:"screen-header"},[n("Header")],1),n("div",{staticClass:"screen-content"},[n("keep-alive",[n("router-view",{attrs:{path:e.$route.params.path,repo:e.$route.params.repo}})],1)],1)])},I=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header container"},["editor"!==e.$route.name?[n("div",{staticClass:"nav-item nav-menu nav-front"},[e._l(e.github.repos,(function(t,s){return["public"===t.scope||e.user.admin?n("div",{staticClass:"nav-menu-item",class:s===e.github.repoKey?"curr":"",attrs:{index:s},on:{click:function(n){return e.switchRepo(s,t)}}},[n("span",{staticClass:"nav-menu-label"},[e._v("\n                    "+e._s(t.name)+" "),t&&"private"===t.scope?n("span",{staticClass:"logo iconfont icon-jiesuo"}):e._e()])]):e._e()]}))],2),e.github.repo&&"article"===e.github.repo.type?[n("div",{staticClass:"nav-item"},[n("form",{staticClass:"nav-form",attrs:{role:"search"},on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"nav-input",attrs:{type:"search",maxlength:"32",placeholder:"关键字"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),n("a",{staticClass:"nav-icon iconfont icon-sousuo",on:{click:e.search}})])])]:e._e()]:e._e(),n("div",{staticClass:"nav-item nav-control"},["editor"===e.$route.name&&e.user.admin?[n("div",{staticClass:"nav-item"},[n("form",{staticClass:"nav-form",attrs:{role:"search"},on:{submit:function(e){e.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.path,expression:"path"}],staticClass:"nav-input",attrs:{readonly:e.file.sha,type:"search",maxlength:"32",placeholder:"文件名称"},domProps:{value:e.path},on:{input:function(t){t.target.composing||(e.path=t.target.value)}}}),e._v(".md\n                    "),n("a",{staticClass:"nav-icon iconfont icon-baocun",on:{click:e.saveFile}}),n("a",{staticClass:"nav-icon iconfont icon-chexiao",on:{click:e.discardFile}}),e.file.sha?n("a",{staticClass:"nav-icon iconfont icon-shanchu",on:{click:e.removeFile}}):e._e()])])]:e._e(),n("div",{staticClass:"nav-item"},[n("div",{staticClass:"nav-menu"},[e.defaultRepoKey()!==e.github.repoKey?n("div",{staticClass:"nav-menu-item",attrs:{title:"设为默认"}},[n("span",{staticClass:"nav-menu-label",on:{click:function(t){return e.resumeRepo(e.github.repoKey,!0)}}},[n("a",{staticClass:"nav-icon iconfont icon-ding"})])]):e._e(),e.github.repo&&"article"===e.github.repo.type&&"article"===e.$route.name&&e.user.admin?[n("div",{staticClass:"nav-menu-item",attrs:{title:"新建文章"}},[n("span",{staticClass:"nav-menu-label"},[n("a",{staticClass:"nav-icon iconfont icon-jiahao",on:{click:e.newFile}})])]),e.file.sha?n("div",{staticClass:"nav-menu-item",attrs:{title:"修改文章"}},[n("span",{staticClass:"nav-menu-label"},[n("a",{staticClass:"nav-icon iconfont icon-bianjibiaoge",on:{click:e.editFile}})])]):e._e()]:e._e(),n("div",{staticClass:"nav-menu-item",attrs:{title:e.user.login&&"@"+e.user.login||"github登录"},on:{mouseover:function(t){e.loginHover=!0},mouseleave:function(t){e.loginHover=!1}}},[n("span",{staticClass:"nav-menu-label"},[e.user.login?n("a",{staticClass:"nav-icon iconfont ",class:{"icon-gerentouxiang":!e.loginHover&&!e.user.admin,"icon-guanliyuanrenzheng":!e.loginHover&&e.user.admin,"icon-dengchu":e.loginHover},on:{click:function(t){return e.logout()}}}):n("a",{staticClass:"nav-icon iconfont icon-saomafuquan",on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.goLogin(!1)},function(t){return t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:e.goLogin(!0):null}]}})])])],2)])],2)],2)},O=[],_=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),x=n("2f62");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={name:"Header",computed:D({},Object(x["c"])(["file","dir","user","token"])),data:function(){return{processing:!1,loginHover:!1,keyword:null,path:null,github:g}},mounted:function(){this.initial()},watch:{$route:function(e,t){this.initial()},path:function(e,t){var n=this;/^\w*(\w+\/?){0,2}\w*$/.test(e)||this.$nextTick((function(){n.path=t}))}},methods:D({},Object(x["b"])(["receiveFile","receiveDir","receiveUser","receiveRepo","receiveToken"]),{initial:function(){"editor"===this.$route.name&&(this.$route.params.sha?(this.file.sha=this.$route.params.sha,this.file.path=this.$route.params.path||"",this.path=this.file.path.replace(/\.md$/,"")):(this.path=this.dir&&this.dir+"/newfile"||"newfile",this.receiveDir(this.$route.params.mkdir||""))),this.keyword=this.$route.params.keyword,this.resumeRepo(this.$route.params.repo),this.resumeUser(this.$route.query.access_token,!!this.$route.query.admin)},switchRepo:function(e,t){return this.receiveFile({}),this.$router.push(w.repoIndexPath(e))},search:function(){return this.$router.push({name:"search",params:{repo:g.repoKey,keyword:this.keyword}})},defaultRepoKey:function(){return this.$cookies.get("repo")||w.defaultRepoKey()},resumeRepo:function(e,t){if(!e){var n=this.$cookies.get("repo");n||(n=w.defaultRepoKey(),this.$cookies.set("repo",n,1/0))}this.receiveRepo(e),t&&(this.$cookies.set("repo",e,1/0),this.$forceUpdate())},resumeUser:function(e,t){var n=this,s=this.$cookies.get("token"),i=this.$cookies.get("user")||{};e&&s!==e?(this.$cookies.set("token",e,"7d"),this.receiveToken(e),w.user().then((function(e){i.login=e.data.login,i.avatar=e.data.avatar_url+"&s=24",i.admin=t,n.$cookies.set("user",JSON.stringify(i),"7d"),n.receiveUser(i)}))):(this.receiveToken(s),this.receiveUser(i))},goHome:function(e){return this.$router.push(w.routePath(this.file.path||this.dir))},goLogin:function(e){return this.$router.push({name:"login",query:{me:e,redirectUrl:window.location.origin+window.location.pathname+"?admin="+(e||"")}})},logout:function(){this.$cookies.remove("token"),this.$cookies.remove("user"),this.receiveUser({}),this.receiveToken(null),this.$forceUpdate()},newFile:function(){return this.receiveFile({}),this.$router.push("/add/"+g.repoKey+"/"+this.dir)},editFile:function(){return this.$router.push("/edit/"+g.repoKey+"/"+this.file.sha+"/"+this.file.path)},removeFile:function(){var e=this;this.processing||(this.processing="remove",w.remove(this.file).then((function(t){return e.receiveFile({}),e.goHome()})).finally((function(){e.processing=!1})))},saveFile:function(){var e=this;this.processing||(this.processing="save",this.file.sha||(this.file.path=this.path+".md"),w.commit(this.file).then((function(t){return e.goHome()})).finally((function(){e.processing=!1})))},discardFile:function(){this.goHome()}})},M=S,q=(n("eea1"),n("2877")),E=Object(q["a"])(M,$,O,!1,null,"774c27e0",null),A=E.exports,z={name:"Home",components:{Header:A}},N=z,R=(n("a97c"),Object(q["a"])(N,k,I,!1,null,"0cc7495a",null)),T=R.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"editor-container"},[n("ul",{staticClass:"mirrormark-toolbar"},[n("li",{staticClass:"bold"},[n("a",{on:{click:function(t){return e.takeAction("bold")}}})]),n("li",{staticClass:"italicize"},[n("a",{on:{click:function(t){return e.takeAction("italicize")}}})]),n("li",{staticClass:"blockquote"},[n("a",{on:{click:function(t){return e.takeAction("blockquote")}}})]),n("li",{staticClass:"code"},[n("a",{on:{click:function(t){return e.takeAction("code")}}})]),n("li",{staticClass:"strikethrough"},[n("a",{on:{click:function(t){return e.takeAction("strikethrough")}}})]),n("li",{staticClass:"link"},[n("a",{on:{click:function(t){return e.takeAction("link")}}})]),n("li",{staticClass:"image"},[n("a",{on:{click:function(t){return e.takeAction("image")}}})]),n("li",{staticClass:"unorderedList"},[n("a",{on:{click:function(t){return e.takeAction("unorderedList")}}})]),n("li",{staticClass:"orderedList"},[n("a",{on:{click:function(t){return e.takeAction("orderedList")}}})]),n("li",{staticClass:"preview"},[n("a",{on:{click:function(t){return e.takeAction("preview")}}})])]),n("codemirror",{ref:"editor",attrs:{options:e.options,events:["drop"]},on:{drop:e.upload},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.preview,expression:"preview"}],staticClass:"editor-preview markdown-body",domProps:{innerHTML:e._s(e.markdown)}}),n("div",{staticClass:"fixed"},[n("a",{class:e.preview&&e.edit&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("all")}}},[e._v("Edit & Preview")]),n("a",{class:!e.preview&&e.edit&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("edit")}}},[e._v("Edit Only")]),n("a",{class:!e.edit&&e.preview&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("preview")}}},[e._v("Preview Only")])])])},U=[],L=(n("8449"),n("55dd"),n("8f94")),B=(n("959b"),n("44a0"),n("9f09"),n("9eb9"),n("0e54")),F=n.n(B),H=n("c197"),J=n.n(H);n("19fe"),n("43bf");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}F.a.setOptions({renderer:new F.a.Renderer,highlight:function(e,t,n){var s=J.a.languages[t]||J.a.languages.autoit;return J.a.highlight(e,s)},gfm:!0,breaks:!1});var W={name:"editor",components:{codemirror:L["codemirror"]},computed:Y({},Object(x["c"])(["file"])),props:{path:String},data:function(){return{editorHeight:0,edit:!0,preview:!0,markdown:null,content:null,editor:null,options:{tabSize:4,mode:"text/x-gfm",lineNumbers:!0,line:!0,lineWrapping:!0,theme:"mirrormark",viewportMargin:1/0}}},watch:{path:function(){var e=this;this.content="",w.contents(this.path,"raw").then((function(t){return e.content=t.data,t}))},content:function(e,t){this.markdown=F()(e),this.file.text=e,this.receiveFile(this.file)}},mounted:function(){var e=this;this.editor=this.$refs.editor.codemirror,this.path&&w.contents(this.path,"raw").then((function(t){return e.content=t.data,t}))},methods:Y({},Object(x["b"])(["receiveFile"]),{changeMode:function(e){e&&"edit"===e?(this.edit=!0,this.preview=!1):e&&"preview"===e?(this.edit=!1,this.preview=!0):(this.edit=!0,this.preview=!0)},upload:function(e,t){if(/image\/.+$/.test(t.dataTransfer.files[0].type)){this.text="!["+t.dataTransfer.files[0].name+"]("+t.dataTransfer.files[0].webkitRelativePath+")";var n=e.coordsChar({left:t.x,top:t.y});e.replaceRange(this.text,n)}},insert:function(e){var t=this.editor.getDoc(),n=t.getCursor();t.replaceRange(e,{line:n.line,ch:n.ch})},insertAround:function(e,t){var n=this.editor.getDoc(),s=n.getCursor();if(n.somethingSelected()){var i=n.getSelection();n.replaceSelection(e+i+t)}else n.replaceRange(e+t,{line:s.line,ch:s.ch}),n.setCursor({line:s.line,ch:s.ch+e.length})},insertBefore:function(e,t){var n=this.editor.getDoc(),s=n.getCursor();if(n.somethingSelected()){var i=n.listSelections();i.forEach((function(s){for(var i=[s.head.line,s.anchor.line].sort(),o=i[0];o<=i[1];o++)n.replaceRange(e,{line:o,ch:0});n.setCursor({line:i[0],ch:t||0})}))}else n.replaceRange(e,{line:s.line,ch:0}),n.setCursor({line:s.line,ch:t||0})},takeAction:function(e){switch(e){case"bold":this.insertAround("**","**");break;case"italicize":this.insertAround("*","*");break;case"strikethrough":this.insertAround("~~","~~");break;case"code":this.insertAround("```\r\n","\r\n```");break;case"blockquote":this.insertBefore("> ",2);break;case"orderedList":this.insertBefore("1. ",3);break;case"unorderedList":this.insertBefore("* ",2);break;case"image":this.insertBefore("![](http://)",2);break;case"link":this.insertAround("[","](http://)");break;case"hr":this.insert("---");break}}})},Q=W,V=(n("a84e"),Object(q["a"])(Q,K,U,!1,null,"c7ce6a30",null)),X=V.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container fluid-container"},[n("div",{staticClass:"search-panel markdown-body"},[e._l(e.searchItems,(function(t){return[n("div",{staticClass:"search-header"},[n("pre",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(n){return e.showFile(t.path)}}},[e._v(e._s(t.name))])]),e._l(t["text_matches"],(function(t){return[n("pre",{staticClass:"matchText",domProps:{innerHTML:e._s(e.pretty(t.fragment,t.matches))}})]}))],2)]})),e.loading||0!==e.searchItems.length?e._e():n("div",{staticClass:"search-header"},[e._v("\n            未找到任何结果\n        ")]),e.incompleteResults?n("div",{staticClass:"search-footer"},[e.loading?n("pre",[n("span",[e._v("查找中... ")]),e._v(" ")]):n("pre",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.more()}}},[e._v("查看更多")])])]):e._e()],2)])},ee=[],te={name:"SearchPanel",data:function(){return{loading:!1,query:{q:null,page:1,perPage:10},searchItems:[],incompleteResults:!1}},mounted:function(){this.query.q=this.$route.params.keyword,this.query.page=1,this.query.perPage=10,this.search()},watch:{"$route.params.keyword":function(e){this.query.q=e,this.query.page=1,this.query.perPage=10,this.searchItems=[],this.search()}},methods:{search:function(){var e=this;return this.loading=!0,w.search(this.query).then((function(t){e.searchItems=e.searchItems.concat(t.data.items),e.incompleteResults=e.searchItems.length!==t.data.total_count})).finally((function(){e.loading=!1}))},more:function(){return this.query.page++,this.search()},showFile:function(e){this.$router.push(w.routePath(e))},pretty:function(e,t){for(var n="",s=0,i=null,o=0;o<t.length;o++)i=t[o],n+=e.substring(s,i.indices[0])+"<span class='pl-k'>"+i.text+"</span>",s=i.indices[1];return n+e.substring(s)}}},ne=te,se=(n("b638"),Object(q["a"])(ne,Z,ee,!1,null,"5dd3231b",null)),ie=se.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-tab"},[e._l(e.componentList,(function(t){return[n("keep-alive",[e.repoKey===t.repoKey?n("ArticlePanel",{key:t.repoKey,attrs:{repo:t.repoKey,path:e.path}}):e._e()],1)]}))],2)},re=[],ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container fluid-container"},[n("div",{staticClass:"panel entry-list"},[n("DirectoryPanel",{attrs:{loading:e.loading,items:e.items,path:e.path}})],1),n("div",{staticClass:"panel entry-body"},[e.preview?[n("ArticleBodyPanel",{attrs:{preview:e.preview,repo:e.repo,path:e.path}})]:[n("span",[e._v(e._s(e.loading?"加载中...":"markdown预览"))])]],2)])},ce=[],ue=(n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"entry-box"},[n("li",{staticClass:"entry",class:{active:e.loadingParentDir(),disabled:""===e.dir},on:{click:function(t){return e.parentDir()}}},[n("div",{staticClass:"entry-body"},[e.loadingParentDir()?n("div",{staticClass:"entry-indicator"},[n("Loading")],1):e._e(),e._v("\n            "+e._s(e.dir?"返回上一层":"根目录")+"\n        ")]),n("div",{staticClass:"entry-footer"},[e._v("\n            "+e._s(e.dir||"..."))])]),e._l(e.items,(function(t){return n("li",{staticClass:"entry",class:{active:t.path===e.path},on:{click:function(n){return e.processItem(t)}}},[n("div",{staticClass:"entry-body"},[e.loading&&t.path===e.path?n("div",{staticClass:"entry-indicator"},[n("Loading")],1):e._e(),e._v("\n            "+e._s(t.name)+"\n        ")]),"file"===t.type?n("div",{staticClass:"entry-footer"},[e._v(e._s(t.size)+" byte")]):e._e(),"dir"===t.type?n("div",{staticClass:"entry-footer"},[e._v("目录")]):e._e()])}))],2)}),le=[],de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader simple-circle"})},pe=[],fe={name:"Loading"},he=fe,me=(n("694c"),Object(q["a"])(he,de,pe,!1,null,"46b33e49",null)),be=me.exports;function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={name:"DirectoryPanel",components:{Loading:be},props:{path:String,items:Array,loading:Boolean},computed:ge({},Object(x["c"])(["dir","file"])),methods:{redirect:function(e){this.path!==e&&this.$router.push(w.routePath(e))},loadingParentDir:function(){var e=this;return this.loading&&function(){if(null===e.items)return!0;for(var t=0;t<e.items.length;t++)if(e.items[t].path===e.path)return!1;return!0}()},parentDir:function(){this.dir&&!this.loading&&this.redirect(w.parentDir(this.dir))},processItem:function(e){this.loading||this.redirect(e.path)}}},Ce=ye,je=(n("b076"),Object(q["a"])(Ce,ue,le,!1,null,"251c1706",null)),we=je.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[n("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.preview)}}),n("IssuePanel",{attrs:{repo:e.repo,path:e.path}})],1)},Ie=[],$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticClass:"issue-header"},[e._v("评论")]),n("div",{staticClass:"issue-form"},[n("div",{staticClass:"issue-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newIssue.title,expression:"newIssue.title"}],staticClass:"issue-input",attrs:{placeholder:"输入问题..."},domProps:{value:e.newIssue.title},on:{input:function(t){t.target.composing||e.$set(e.newIssue,"title",t.target.value)}}})]),n("div",{staticClass:"issue-body"},[n("EditableDiv",{staticClass:"issue-input",model:{value:e.newIssue.body,callback:function(t){e.$set(e.newIssue,"body",t)},expression:"newIssue.body"}})],1),n("div",{staticClass:"issue-action"},[n("button",{staticClass:"submit-btn",attrs:{disabled:"createIssue"===e.processing||!e.newIssue.title||!e.newIssue.body},on:{click:function(t){return e.createIssue()}}},[e._v("评论")])])]),n("div",{staticClass:"issue-list"},[e._l(e.issues,(function(t,s){return n("div",{staticClass:"issue-item"},[n("div",{staticClass:"issue-avatar",style:{backgroundImage:"url("+t.node.author.avatarUrl+"&s=42)"}}),n("div",{staticClass:"issue-box"},[e.updatedIssue.id===t.node.id?[n("div",{staticClass:"issue-box-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedIssue.title,expression:"updatedIssue.title"}],staticClass:"issue-input",attrs:{placeholder:"输入问题..."},domProps:{value:e.updatedIssue.title},on:{input:function(t){t.target.composing||e.$set(e.updatedIssue,"title",t.target.value)}}})]),n("div",{staticClass:"issue-box-body"},[n("EditableDiv",{staticClass:"issue-input",model:{value:e.updatedIssue.body,callback:function(t){e.$set(e.updatedIssue,"body",t)},expression:"updatedIssue.body"}})],1),n("div",{staticClass:"issue-box-footer"},[n("span",{staticClass:"pull-right"},[n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyIssue"===e.processing||!e.updatedIssue.title||!e.updatedIssue.body},on:{click:function(t){return e.modifyIssue()}}},[e._v("提交")]),n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyIssue"===e.processing},on:{click:function(t){return e.toModifyIssue(null)}}},[e._v("取消")])])])]:[n("div",{staticClass:"issue-box-title"},[n("span",{staticClass:"issue-username"},[e._v(e._s(t.node.author.login)+" ")]),e._v(e._s(t.node.title))]),n("div",{staticClass:"issue-box-body"},[e._v(e._s(t.node.body))]),n("div",{staticClass:"issue-box-footer"},[e._v("\n                        "+e._s(new Date(t.node.createdAt).toLocaleString())+"\n                        "),n("span",{staticClass:"pull-right"},[n("a",{staticClass:"issue-button",on:{click:function(n){e.replyIssueId=t.node.id}}},[e._v("回复("+e._s(t.node.comments.totalCount)+")")]),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.toModifyIssue(t.node)}}},[e._v("修改")]):e._e(),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.removeIssue(t.node.id)}}},[e._v("删除")]):e._e()])])],n("div",{staticClass:"issue-comment-list"},[e.replyIssueId===t.node.id?n("div",{staticClass:"issue-box-reply"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newComment.body,expression:"newComment.body"}],staticClass:"issue-reply-input issue-input",attrs:{autofocus:"",placeholder:"回复"+t.node.author.login+"..."},domProps:{value:e.newComment.body},on:{input:function(t){t.target.composing||e.$set(e.newComment,"body",t.target.value)}}}),n("button",{staticClass:"submit-btn issue-reply-button",attrs:{disabled:"createComment"===e.processing||!e.newComment.body},on:{click:function(n){return e.createComment(s,t.node.id)}}},[e._v("回复")])]):e._e(),e._l(t.node.comments.nodes,(function(i){return n("div",{staticClass:"issue-comment-item"},[n("div",{staticClass:"issue-avatar",style:{backgroundImage:"url("+i.author.avatarUrl+"&s=42)"}}),n("div",{staticClass:"issue-box"},[e.updatedComment.id===i.id?[n("div",{staticClass:"issue-box-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedComment.body,expression:"updatedComment.body"}],staticClass:"issue-input",attrs:{placeholder:"输入回复..."},domProps:{value:e.updatedComment.body},on:{input:function(t){t.target.composing||e.$set(e.updatedComment,"body",t.target.value)}}})]),n("div",{staticClass:"issue-box-footer"},[n("span",{staticClass:"pull-right"},[n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyComment"===e.processing||!e.updatedComment.body},on:{click:function(n){return e.modifyComment(s,t.node.id,i.id)}}},[e._v("提交")]),n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyComment"===e.processing},on:{click:function(t){return e.toModifyComment(null)}}},[e._v("取消")])])])]:[n("div",{staticClass:"issue-box-title"},[n("span",{staticClass:"issue-username"},[e._v(e._s(i.author.login)+" ")])]),n("div",{staticClass:"issue-box-body"},[e._v(e._s(i.body))]),n("div",{staticClass:"issue-box-footer"},[e._v("\n                                    "+e._s(new Date(i.createdAt).toLocaleString())+"\n                                    "),n("span",{staticClass:"pull-right"},[e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(t){return e.toModifyComment(i)}}},[e._v("修改")]):e._e(),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.removeComment(s,t.node.id,i.id)}}},[e._v("删除")]):e._e()])])]],2)])}))],2),t.node.comments.pageInfo.hasNextPage?n("div",{staticClass:"fetch-more-issue-comment",on:{click:function(n){return e.loadMoreComment(s,t.node.id,t.node.comments.pageInfo.endCursor)}}},[e._v("\n                    "+e._s(e.processing==="listComment"+t.node.id?"加载中...":"查看更多")+"\n                ")]):e._e()],2)])})),e.pageInfo.hasNextPage?n("div",{staticClass:"fetch-more-issue",on:{click:function(t){return e.loadMoreIssue(e.pageInfo.endCursor)}}},[e._v("  "+e._s("listIssue"===e.processing?"加载中...":"查看更多"))]):e._e()],2)])},Oe=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"editable",attrs:{tabindex:"-1",contenteditable:""},on:{input:e.handleInput}})},xe=[],Pe={props:["value"],mounted:function(){this.$refs.editable.innerText=this.value},data:function(){return{internal:!0}},methods:{handleInput:function(e){this.internal=!0,this.$emit("input",this.$refs.editable.innerText)}},watch:{value:{immediate:!0,handler:function(e,t){this.internal||(this.$refs.editable.innerText=e),this.internal=!1}}}},De=Pe,Se=Object(q["a"])(De,_e,xe,!1,null,null,null),Me=Se.exports;function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae={name:"IssuePanel",components:{EditableDiv:Me},props:{path:String,repo:String},data:function(){return{processing:!1,issues:[],pageInfo:{},totalCount:null,replyIssueId:null,newIssue:{title:null,body:null},updatedIssue:{id:null,title:null,body:null},newComment:{body:null},updatedComment:{id:null,body:null}}},computed:Ee({},Object(x["c"])(["dir","file","user"])),created:function(){},beforeDestroy:function(){},mounted:function(){this.refresh()},watch:{path:function(e,t){this.refresh()},repo:function(e,t){this.refresh()}},methods:Ee({},Object(x["b"])(["receiveFile","receiveDir"]),{requiredLogin:function(){if(!this.user.login)throw this.$message.error("请先登录github账号!"),Error("login required")},refresh:function(){var e=this;this.newIssue={title:null,body:null},this.updatedIssue={id:null,title:null,body:null},this.newComment={body:null},this.updatedComment={id:null,body:null},w.issues(this.path).then((function(t){e.issues=t.repository.issues.edges,e.pageInfo=t.repository.issues.pageInfo,e.totalCount=t.repository.issues.totalCount}))},loadMoreIssue:function(e){var t=this;this.processing="listIssue",w.issues(this.path,e).then((function(e){t.issues=t.issues.concat(e.repository.issues.edges),t.pageInfo=e.repository.issues.pageInfo,t.totalCount=e.repository.issues.totalCount})).catch((function(e){t.$message.error(e.message)})).finally((function(e){t.processing=!1}))},createIssue:function(){var e=this;this.requiredLogin(),this.processing="createIssue",w.createIssue(this.path,this.newIssue.title,this.newIssue.body).then((function(t){e.$message.success("评论成功"),e.refresh()})).catch((function(t){e.$message.error(t.message)})).finally((function(){e.processing=!1}))},toModifyIssue:function(e){e?(this.updatedIssue.id=e.id,this.updatedIssue.title=e.title,this.updatedIssue.body=e.body):this.updatedIssue={id:null,title:null,body:null}},modifyIssue:function(){var e=this;this.processing="modifyIssue",w.updateIssue(this.updatedIssue.id,this.updatedIssue.title,this.updatedIssue.body).then((function(t){e.$message.success("评论修改成功"),e.refresh()})).catch((function(t){e.$message.error(t.message)})).finally((function(){e.processing=!1}))},removeIssue:function(e){var t=this;this.$confirm("此操作将永久删除评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.processing="deleteIssue",w.deleteIssue(e).then((function(e){t.$message.success("删除成功!"),t.refresh()})).catch((function(e){t.$message.error(e.message)})).finally((function(){t.processing=!1}))})).catch((function(e){t.$message.info(e.message)}))},loadMoreComment:function(e,t,n){var s=this;this.processing="listComment"+t,w.issueComments(t,n).then((function(t){var i=s.issues[e].node.comments.nodes;n&&i?s.$set(s.issues[e].node.comments,"nodes",i.concat(t.node.comments.nodes)):s.$set(s.issues[e].node.comments,"nodes",t.node.comments.nodes),s.$set(s.issues[e].node.comments,"totalCount",t.node.comments.totalCount),s.$set(s.issues[e].node.comments,"pageInfo",t.node.comments.pageInfo)})).catch((function(e){s.$message.error(e.message)})).finally((function(){s.processing=!1}))},createComment:function(e,t){var n=this;this.requiredLogin(),this.processing="createComment",w.createIssueComment(t,this.newComment.body).then((function(s){n.$message.success("回复成功"),n.newComment.body=null,n.loadMoreComment(e,t)})).catch((function(e){n.$message.error(e.message)})).finally((function(){n.processing=!1}))},toModifyComment:function(e){e?(this.updatedComment.id=e.id,this.updatedComment.body=e.body):this.updatedComment={id:null,body:null}},modifyComment:function(e,t,n){var s=this;this.processing="modifyComment",w.updateIssueComment(n,this.updatedComment.body).then((function(n){s.$message.success("修改成功"),s.updatedComment.id=null,s.updatedComment.body=null,s.loadMoreComment(e,t)})).catch((function(e){s.$message.error(e.message)})).finally((function(){s.processing=!1}))},removeComment:function(e,t,n){var s=this;this.$confirm("此操作将永久删除回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return s.processing="removeComment",w.deleteIssueComment(n).then((function(n){s.$message.success("删除成功!"),s.loadMoreComment(e,t)})).catch((function(e){s.$message.error(e.message)})).finally((function(){s.processing=!1}))})).catch((function(e){s.$message.info(e.message)}))}})},ze=Ae,Ne=(n("8a0f"),Object(q["a"])(ze,$e,Oe,!1,null,"0f9cb00e",null)),Re=Ne.exports,Te={name:"ArticleBodyPanel",components:{IssuePanel:Re},props:{preview:String,repo:String,path:String}},Ke=Te,Ue=Object(q["a"])(Ke,ke,Ie,!1,null,"41247baf",null),Le=Ue.exports;function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He={name:"ArticlePanel",components:{ArticleBodyPanel:Le,DirectoryPanel:we},props:{path:String,repo:String},data:function(){return{loading:!1,items:null,preview:null}},computed:Fe({},Object(x["c"])(["dir","file","repoKey"])),beforeDestroy:function(){},created:function(){var e=this;this.refresh(this.path).then((function(){e.restoreHash()}))},watch:{path:function(e,t){this.refresh(e)},repo:function(e,t){}},methods:Fe({},Object(x["b"])(["receiveFile","receiveDir"]),{refresh:function(e,t){return this.showContent(e||"",t)},restoreHash:function(){if(this.$route.hash){var e=document.querySelector("[href='"+decodeURIComponent(this.$route.hash)+"']");if(e){var t=80,n=e.getBoundingClientRect().top,s=n-t;window.scrollTo({top:s,behavior:"smooth"})}}},markedItem:function(e){this.receiveFile(this.items.find((function(t){return t.path===e})))},showContent:function(e,t){var n=this,s=null;return this.loading=!0,w.contents(e).then((function(i){if("file"===i.type){if(n.preview=i.data,s=w.parentDir(e),t||s!==n.dir||null===n.items)return n.showContent(s).then((function(t){return n.markedItem(e),t}));n.markedItem(e)}else n.items=i.data,s=e;return n.receiveDir(s),i})).catch((function(s){if(n.preview=s.message,t)return n.showContent(w.parentDir(e))})).finally((function(){n.loading=!1}))}})},Je=He,Ge=(n("884f"),Object(q["a"])(Je,ae,ce,!1,null,"8c1b9c14",null)),Ye=Ge.exports;function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Object(_["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve={components:{ArticlePanel:Ye},props:{path:String,repo:String},data:function(){return{componentList:this.articleList()}},computed:Qe({},Object(x["c"])(["repoKey"])),methods:{articleList:function(){var e=[];for(var t in g.repos)if(g.repos.hasOwnProperty(t)&&"article"===g.repos[t].type){var n={};n.name=g.repos[t].name,n.repoKey=t,e.push(n)}return e}}},Xe=Ve,Ze=Object(q["a"])(Xe,oe,re,!1,null,null,null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container notebook-container"},[e._l(e.notes,(function(t,s){return n("div",{staticClass:"metro-box u-drag-content text-box"},[n("div",{staticClass:"metro-style-bg"},[n("div",{staticClass:"outline"},[n("em",{staticClass:"triangle"}),n("div",{directives:[{name:"show",rawName:"v-show",value:s===e.editable,expression:"index === editable"}],staticClass:"content-wrapper editable"},[n("EditableDiv",{staticClass:"content",attrs:{id:s},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"note.text"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:s!==e.editable,expression:"index !== editable"}],staticClass:"content-wrapper"},[n("div",{staticClass:"content"},[e._v(e._s(t.text))])])]),n("div",{staticClass:"note-footer"},[n("span",{staticClass:"note-time"},[e._v(" "+e._s(e.moment(new Date(parseInt(t.path))).format("YYYY-MM-DD HH:mm:ss")))]),n("div",{staticClass:"note-icons"},[s===e.editable?[n("span",{staticClass:"iconfont icon-baocun",on:{click:function(n){return e.save(s,t)}}}),n("span",{staticClass:"iconfont icon-chexiao",on:{click:function(t){return e.undo(s)}}})]:[n("span",{staticClass:"iconfont icon-bianjibiaoge",on:{click:function(n){return e.modify(s,t)}}}),n("span",{staticClass:"iconfont icon-shanchu",on:{click:function(n){return e.remove(s,t)}}})]],2)])])])})),n("div",{staticClass:"metro-box u-drag-content text-box"},[n("div",{staticClass:"metro-style-bg"},[n("div",{staticClass:"outline"},[n("em",{staticClass:"triangle"}),n("div",{directives:[{name:"show",rawName:"v-show",value:-1===e.editable,expression:"-1 === editable"}],staticClass:"content-wrapper editable"},[n("EditableDiv",{staticClass:"content",attrs:{id:"-1"},model:{value:e.newNote.text,callback:function(t){e.$set(e.newNote,"text",t)},expression:"newNote.text"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:-1!==e.editable,expression:"-1 !== editable"}],staticClass:"content-wrapper"},[n("span",{staticClass:"iconfont icon-jiahao icon-new",on:{click:function(t){return e.modify(-1)}}})])]),-1===e.editable?n("div",{staticClass:"note-footer"},[n("div",{staticClass:"note-icons"},[n("span",{staticClass:"iconfont icon-baocun",on:{click:function(t){return e.save(-1,e.newNote)}}}),n("span",{staticClass:"iconfont icon-chexiao",on:{click:function(t){return e.undo(-1)}}})])]):e._e()])])],2)},nt=[],st={name:"NotePanel",props:{repo:String,path:String},components:{EditableDiv:Me},data:function(){return{editable:!1,notes:[],newNote:{path:null,text:null},currNote:null}},created:function(){this.lists()},methods:{loading:function(e){return this.$loading({target:document.getElementById(e).parentElement.parentElement})},lists:function(){var e=this;return w.listNotes().then((function(t){t.repository&&t.repository.object.entries&&(e.notes=[],t.repository.object.entries.forEach((function(t){var n={};n.sha=t.object.oid,n.path=t.name,n.text=t.object.text,e.notes.push(n)})))}))},undo:function(e){-1===e?this.newNote=this.currNote:this.notes[e]=this.currNote,this.editable=!1},save:function(e,t){var n=this;t.sha||(t.path=(new Date).getTime());var s=this.loading(e);w.commit(t).then((function(i){t.sha=i.data.content.sha,n.editable=!1,-1===e?(n.undo(-1),n.lists().then((function(e){n.$message({type:"success",message:"保存成功"})})).finally((function(e){s.close()}))):(s.close(),n.$message({type:"success",message:"保存成功"}))})).catch((function(t){n.$message({type:"error",message:t}),n.undo(e),s.close()}))},modify:function(e,t){!1!==this.editable&&this.undo(this.editable),this.editable=e,this.currNote=t&&JSON.parse(JSON.stringify(t))||{path:null,text:null},this.$nextTick((function(){document.getElementById(e).focus()}))},remove:function(e,t){var n=this;this.$confirm("删除笔记"+t.path+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s=n.loading(e);w.remove(t).then((function(){n.lists().then((function(){n.$message({type:"success",message:"删除成功"})})).finally((function(e){s.close()}))})).catch((function(e){n.$message({type:"error",message:e}),s.close()}))}))}}},it=st,ot=(n("61d8"),n("311a"),Object(q["a"])(it,tt,nt,!1,null,"f4137cc0",null)),rt=ot.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ct=[],ut={name:"Login",mounted:function(){if(this.$route.query.me){var e="client_id="+g.oauthAppsClientId;window.location="https://github.com/login/oauth/authorize?"+e+"&redirect_uri="+encodeURIComponent(this.authorizeUrl(e))+"&scope=repo&login="+g.owner+"&state="+Math.floor(1e5*Math.random())}else{var t="client_id="+g.githubAppsClientId;window.location="https://github.com/login/oauth/authorize?"+t+"&redirect_uri="+encodeURIComponent(this.authorizeUrl(t))+"&state="+Math.floor(1e5*Math.random())}},methods:{authorizeUrl:function(e){return g.oauthUrl+"?"+e+"&redirect_uri="+encodeURIComponent(this.$route.query.redirectUrl||"")}}},lt=ut,dt=Object(q["a"])(lt,at,ct,!1,null,"6a1a8e25",null),pt=dt.exports;function ft(e){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2===n.length)return n.pop().split(";").shift()}s["default"].use(o["a"]);var ht=new o["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:w.repoIndexPath(ft("repo")||w.defaultRepoKey())},{path:"/",component:T,children:[{name:"note",path:"/note/:repo("+v+")",component:rt},{name:"article",path:"/article/:repo("+b+")/:path*",component:et},{path:"/edit/:repo("+b+")/:sha/:path*",component:X,name:"editor"},{path:"/add/:repo("+b+")/:mkdir*",component:X,name:"editor"},{name:"search",path:"/search/:repo("+b+")/:keyword",component:ie},{name:"login",path:"/login",component:pt}]},{path:"*",redirect:w.repoIndexPath(ft("repo")||w.defaultRepoKey())}]});s["default"].use(x["a"]);var mt={token:null,user:{},repo:{},repoKey:null,file:{},dir:""},bt={receiveFile:function(e,t){e.file=t},receiveDir:function(e,t){e.dir=t},receiveUser:function(e,t){e.user=t},receiveRepo:function(e,t){e.repoKey=t,e.repo=w.repo(t)},receiveToken:function(e,t){e.token=t,w.authorized(t)}},vt={},gt=new x["a"].Store({state:mt,mutations:bt,actions:vt}),yt=n("2b27"),Ct=n.n(yt),jt=n("c1df"),wt=n.n(jt),kt=(n("0fae"),n("5c96"));s["default"].prototype.moment=wt.a,s["default"].use(kt["Loading"].directive),s["default"].prototype.$loading=kt["Loading"].service,s["default"].prototype.$msgbox=kt["MessageBox"],s["default"].prototype.$alert=kt["MessageBox"].alert,s["default"].prototype.$confirm=kt["MessageBox"].confirm,s["default"].prototype.$prompt=kt["MessageBox"].prompt,s["default"].prototype.$notify=kt["Notification"],s["default"].prototype.$message=kt["Message"],s["default"].use(Ct.a),s["default"].config.productionTip=!1,new s["default"]({router:ht,store:gt,render:function(e){return e(i["default"])}}).$mount("#app")},"61d8":function(e,t,n){"use strict";var s=n("8bbf"),i=n.n(s);i.a},"64a9":function(e,t,n){},"694c":function(e,t,n){"use strict";var s=n("7bc9"),i=n.n(s);i.a},"7aff":function(e,t,n){},"7bc9":function(e,t,n){},"884f":function(e,t,n){"use strict";var s=n("056c"),i=n.n(s);i.a},"8a0f":function(e,t,n){"use strict";var s=n("f257"),i=n.n(s);i.a},"8bbf":function(e,t,n){},"941c":function(e,t,n){},"9a6a":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view",[n("div",{attrs:{id:"app"}})])},i=[];n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}))},a84e:function(e,t,n){"use strict";var s=n("fe67"),i=n.n(s);i.a},a97c:function(e,t,n){"use strict";var s=n("7aff"),i=n.n(s);i.a},b076:function(e,t,n){"use strict";var s=n("bda0"),i=n.n(s);i.a},b638:function(e,t,n){"use strict";var s=n("0870"),i=n.n(s);i.a},bda0:function(e,t,n){},caea:function(e,t,n){},eea1:function(e,t,n){"use strict";var s=n("941c"),i=n.n(s);i.a},f257:function(e,t,n){},fe67:function(e,t,n){}}]);
//# sourceMappingURL=chunk-common.298f0893.js.map