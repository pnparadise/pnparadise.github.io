(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t,n){e.exports=n("56d7")},"015b":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view",[n("div",{attrs:{id:"app"}})])},s=[]},"034f":function(e,t,n){"use strict";var i=n("64a9"),s=n.n(i);s.a},"15cb":function(e,t,n){},"199c":function(e,t){},"23be":function(e,t,n){"use strict";var i=n("199c"),s=n.n(i);t["default"]=s.a},2932:function(e,t){e.exports={owner:"pnparadise",defaultRepoKey:"s",repos:{s:{name:"gitbook",scope:"public",type:"article",index:"/README.md"},p:{name:"secretbook",scope:"private",type:"article",index:"/README.md"},book:{name:"secretnote",scope:"private",type:"note",index:""}},publicToken:"040ab84ddddee4c947c9f0f23a546464045f01ad",oauthAppsClientId:"225031944a6bf76a419c",githubAppsClientId:"Iv1.fb87a658b1a64609",authorizeUrl:"https://passport-github.ggga.ga"}},"34a1":function(e,t,n){"use strict";var i=n("5f49"),s=n.n(i);s.a},"3dfd":function(e,t,n){"use strict";var i=n("015b"),s=n("23be"),o=(n("034f"),n("2877")),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id="4678"},"4df1":function(e,t,n){},"537b":function(e,t,n){"use strict";var i=n("65e5"),s=n.n(i);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=n("3dfd"),o=n("8c4f"),r=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("7f7f"),n("bd86")),a=(n("386d"),n("6b54"),n("28a5"),n("27ae")),c=n("d69d"),u=n.n(c),l=n("e09a"),d=n("2932"),p=n.n(d);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={client:null,defaultClient:new u.a({baseUrl:"https://api-github.ggga.ga",auth:"token "+p.a.publicToken}),graphqlClient:null,defaultGraphqlClient:l["a"].defaults({baseUrl:"https://api-github.ggga.ga",headers:{authorization:"token "+p.a.publicToken}}),markdownPathReg:null,notePathReg:null};function b(){return!m.graphqlClient&&m.token&&(m.graphqlClient=l["a"].defaults({baseUrl:"https://api-github.ggga.ga",headers:{authorization:"token "+m.token}})),new Promise((function(e,t){m.graphqlClient?e(m.graphqlClient):e(m.defaultGraphqlClient)}))}function v(){return!m.client&&m.token&&(m.client=new u.a({baseUrl:"https://api-github.ggga.ga",auth:"token "+m.token})),new Promise((function(e,t){m.client?e(m.client):e(m.defaultClient)}))}function g(e){var t=e.headers["content-type"]||"";-1===t.indexOf("application/vnd.github.v3.raw")&&-1===t.indexOf("application/vnd.github.v3.html")||(e.type="file"),-1!==t.indexOf("application/json")&&(Array.isArray(e.data)?e.type="dir":e.type=e.data&&e.data.type||null)}function y(e){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2===n.length)return n.pop().split(";").shift()}(function(){var e=[],t=[];for(var n in p.a.repos)if(p.a.repos.hasOwnProperty(n)){var i=p.a.repos[n];"article"===i.type&&e.push(n),"note"===i.type&&t.push(n)}m.markdownPathReg=e.join("|"),m.notePathReg=t.join("|")})();var C={contents:function(e,t){var n=this;return v().then((function(i){return i.repos.getContents({owner:n.owner,repo:n.repo,path:e,headers:{"If-None-Match":""},mediaType:{format:t||"html"}}).then((function(e){return g(e),e}))}))},remove:function(e){var t=this;return v().then((function(n){return n.repos.deleteFile({owner:t.owner,repo:t.repo,path:e.path,message:"octokit: [master] page deleted",sha:e.sha})}))},commit:function(e){var t=this;return v().then((function(n){return n.repos.createOrUpdateFile({owner:t.owner,repo:t.repo,path:e.path,message:"octokit: [master] page modified",content:a["Base64"].encode(e.text),sha:e.sha})}))},issues:function(e,t,n){var i=this;return b().then((function(s){return s({query:"query listIssues($owner: String!, $repo: String!, $size: Int!, $after: String, $labels: [String!]) {\n                          repository(name: $repo, owner: $owner) {\n                            issues(first: $size, after: $after, labels: $labels, orderBy:{field: CREATED_AT, direction: DESC}){\n                              edges {\n                                node {\n                                 comments(first: 2){\n                                    totalCount\n                                    pageInfo{\n                                      hasNextPage\n                                      hasPreviousPage\n                                      startCursor\n                                      endCursor\n                                    }\n                                    nodes {\n                                      id\n                                      body\n                                      createdAt\n                                      viewerCanDelete\n                                      viewerCanUpdate\n                                      viewerCanReact\n                                      author{\n                                        login\n                                        avatarUrl\n                                      }\n                                    }\n                                  }\n                                  id\n                                  number\n                                  title\n                                  body\n                                  createdAt\n                                  viewerCanUpdate\n                                  viewerCanReact\n                                  author {\n                                    login\n                                    avatarUrl\n                                  }\n                                }\n                              }\n                              pageInfo {\n                                hasNextPage\n                                hasPreviousPage\n                                startCursor\n                                endCursor\n                              }\n                              totalCount\n                            }\n                          }\n                        }\n                        ",owner:i.owner,repo:i.repo,size:n||10,labels:[e],after:t||null})}))},createIssue:function(e,t,n){var i=this;return v().then((function(s){return s.issues.create({owner:i.owner,repo:i.repo,labels:[e],title:t,body:n})}))},deleteIssue:function(e){return b().then((function(t){return t({query:"mutation deleteIssue($clientMutationId: String!, $issueId: String!) {\n                          deleteIssue(input:{clientMutationId:$clientMutationId,issueId:$issueId}) {\n                            clientMutationId \n                            repository {\n                              id\n                            }\n                          }\n                        }",clientMutationId:Math.random().toString(36).slice(-5),issueId:e})}))},updateIssue:function(e,t,n){return b().then((function(i){return i({query:"mutation updateIssue( $id: ID!, $title: String!, $body: String!) {\n                              updateIssue(input:{ id: $id, title: $title, body: $body}) {\n                                issue{\n                                  id\n                                }\n                              }\n                            }",id:e,title:t,body:n})}))},issueComments:function(e,t,n){return b().then((function(i){return i({query:"query queryIssueComment($issueId: ID!, $after: String, $size: Int!) {\n                              node(id: $issueId) {\n                                ... on Issue {\n                                    comments(first: $size, after: $after){\n                                      totalCount\n                                      pageInfo{\n                                        hasNextPage\n                                        hasPreviousPage\n                                        startCursor\n                                        endCursor\n                                      }\n                                      nodes {\n                                        id\n                                        body\n                                        createdAt\n                                        viewerCanDelete\n                                        viewerCanUpdate\n                                        viewerCanReact\n                                        author{\n                                          login\n                                          avatarUrl\n                                        }\n                                      }\n                                    }\n                                  }\n                              }\n                            }\n                            ",issueId:e,after:t||null,size:n||10})}))},createIssueComment:function(e,t){return b().then((function(n){return n({query:"mutation createIssueComment($clientMutationId: String!, $issueId: ID!, $body: String!) {\n                              addComment(input: {clientMutationId: $clientMutationId, subjectId: $issueId, body: $body}) {\n                                subject {\n                                  id\n                                }\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),issueId:e,body:t})}))},deleteIssueComment:function(e){return b().then((function(t){return t({query:"mutation deleteIssueCommentInput($clientMutationId: String!, $commentId: ID!) {\n                              deleteIssueComment(input: {clientMutationId: $clientMutationId, id: $commentId}) {\n                                clientMutationId\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),commentId:e})}))},updateIssueComment:function(e,t){return b().then((function(n){return n({query:"mutation updateIssueComment($clientMutationId: String!, $commentId: ID!, $body: String!) {\n                              updateIssueComment(input: {clientMutationId: $clientMutationId, id: $commentId, body: $body}) {\n                                 issueComment{\n                                    id\n                                 }\n                              }\n                            }\n                            ",clientMutationId:Math.random().toString(36).slice(-5),commentId:e,body:t})}))},user:function(){return v().then((function(e){return e.users.getAuthenticated()}))},search:function(e){var t=this;return v().then((function(n){return n.search.code({q:e.q+"+repo:"+t.owner+"/"+t.repo,page:e.page,per_page:e.perPage,mediaType:{format:"text-match+json"}})}))},listNotes:function(){var e=this;return b().then((function(t){return t({query:'query listNotes($owner: String!, $repo: String!) {\n                          repository(name: $repo, owner: $owner) {\n                            object(expression: "master:") {\n                              ... on Tree {\n                                entries {\n                                  name\n                                  object {\n                                    ... on Blob {\n                                      oid\n                                      text\n                                    }\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }',owner:e.owner,repo:e.repo})}))}},j=h({repo:function(e){var t={};return t.repo=p.a.repos[e].name,t.owner=p.a.owner,h(h({},t),C)},parentDir:function(e){return e.replace(/\/?([^/]+\/?)?$/,"")},defaultRepoKey:function(){return y("repo")||p.a.defaultRepoKey},repos:function(){return p.a.repos},getRepo:function(e){return p.a.repos[e]},routePath:function(e,t){return e||(e=this.defaultRepoKey()),"/"+p.a.repos[e].type+"/"+e+(t&&"/"+t||p.a.repos[e].index)},authorized:function(e){m.token=e,m.client=null,m.graphqlClient=null},markdownPathReg:function(){return m.markdownPathReg},notePathReg:function(){return m.notePathReg},preset:function(e){return p.a[e]}},C),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"screen"},[n("div",{staticClass:"screen-header"},[n("Header",{staticClass:"lg-container"})],1),n("div",{staticClass:"screen-content lg-container"},[n("keep-alive",{attrs:{exclude:"editor"}},[n("router-view",{attrs:{path:e.$route.params.path,repo:e.$route.params.repo}})],1)],1)])},k=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header container"},[n("div",{staticClass:"nav-item nav-cross"},[n("div",{staticClass:"nav-menu-item",on:{click:function(t){return e.toggleDir()}}},[n("span",{staticClass:"nav-menu-label nav-icon iconfont icon-caidan"})])]),"editor"!==e.$route.name?[n("div",{staticClass:"nav-item nav-menu nav-front"},[e._l(e.repos,(function(t,i){return["public"===t.scope||e.user.admin?n("div",{staticClass:"nav-menu-item",class:i===e.repoKey?"curr":"",attrs:{index:i},on:{click:function(t){return e.switchRepo(i)}}},[n("span",{staticClass:"nav-menu-label"},[e._v("\n                    "+e._s(t.name)+" "),"private"===t.scope?n("span",{staticClass:"logo iconfont icon-jiesuo"}):e._e()])]):e._e()]}))],2)]:e._e(),"article"===e.$route.name||"search"===e.$route.name?[n("div",{staticClass:"nav-item nav-search"},[n("form",{staticClass:"nav-form",attrs:{role:"search"},on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"nav-input",attrs:{type:"search",maxlength:"32",placeholder:"关键字"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),n("a",{staticClass:"nav-icon iconfont icon-sousuo",on:{click:e.search}})])])]:e._e(),n("div",{staticClass:"nav-item nav-control"},["editor"===e.$route.name&&e.user.admin?[n("div",{staticClass:"nav-item"},[n("form",{staticClass:"nav-form",attrs:{role:"search"},on:{submit:function(e){e.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filePath,expression:"filePath"}],staticClass:"nav-input",attrs:{readonly:e.file.sha,type:"search",maxlength:"32",placeholder:"文件名称"},domProps:{value:e.filePath},on:{input:function(t){t.target.composing||(e.filePath=t.target.value)}}}),e._v(".md\n                    "),n("a",{staticClass:"nav-icon iconfont icon-baocun",on:{click:e.saveFile}}),n("a",{staticClass:"nav-icon iconfont icon-chexiao",on:{click:e.discardFile}}),e.file.sha?n("a",{staticClass:"nav-icon iconfont icon-shanchu",on:{click:e.removeFile}}):e._e()])])]:e._e(),n("div",{staticClass:"nav-item"},[n("div",{staticClass:"nav-menu"},[e.defaultRepoKey()!==e.repoKey?n("div",{staticClass:"nav-menu-item",attrs:{title:"设为默认"},on:{click:function(t){return e.resumeRepo(e.repoKey,!0)}}},[n("span",{staticClass:"nav-menu-label nav-icon iconfont icon-ding"})]):e._e(),"article"===e.$route.name&&e.user.admin?[n("div",{staticClass:"nav-menu-item",attrs:{title:"新建文章"},on:{click:e.newFile}},[n("span",{staticClass:"nav-menu-label nav-icon iconfont icon-jiahao"})]),e.file.sha?n("div",{staticClass:"nav-menu-item",attrs:{title:"修改文章"},on:{click:e.editFile}},[n("span",{staticClass:"nav-menu-label nav-icon iconfont icon-bianjibiaoge"})]):e._e()]:e._e(),n("div",{staticClass:"nav-menu-item",attrs:{title:e.user.login&&"@"+e.user.login||"github登录"},on:{mouseover:function(t){e.loginHover=!0},mouseleave:function(t){e.loginHover=!1},click:[function(t){if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return null;e.toggleLogin(e.repoKey&&"private"===e.repos[e.repoKey].scope)},function(t){return t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:e.goLogin(!0):null}]}},[n("span",{staticClass:"nav-menu-label"},[e.user.login?n("span",{staticClass:"nav-icon iconfont ",class:{"icon-gerentouxiang":!e.loginHover&&!e.user.admin,"icon-guanliyuanrenzheng":!e.loginHover&&e.user.admin,"icon-dengchu":e.loginHover}}):n("span",{staticClass:"nav-icon iconfont icon-saomafuquan"})])])],2)])],2)],2)},O=[],$=n("2f62");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={name:"Header",computed:P({},Object($["c"])(["file","dir","user","token","repoKey","history","showDir"])),data:function(){return{processing:!1,loginHover:!1,keyword:null,filePath:null,repos:j.repos(),repo:null,path:null}},mounted:function(){this.initial()},watch:{$route:function(e,t){this.initial()}},methods:P(P({},Object($["b"])(["receiveFile","receiveDir","receiveUser","receiveRepo","receiveToken","receiveToggleDir"])),{},{initial:function(){this.repo=this.$route.params.repo,this.path=this.$route.params.path,"editor"===this.$route.name&&(this.$route.params.sha?(this.file.sha=this.$route.params.sha,this.file.path=this.$route.params.path||"",this.filePath=this.file.path.replace(/\.md$/,"")):(this.filePath=this.dir&&this.dir+"/newfile"||"newfile",this.receiveDir(this.$route.params.mkdir||""))),this.keyword=this.$route.params.keyword,this.resumeRepo(this.$route.params.repo),this.resumeUser(this.$route.query.access_token,!!this.$route.query.admin)},switchRepo:function(e){return console.info(this.history[e]),this.$router.push(j.routePath(e,this.history[e]))},search:function(){return this.$router.push({name:"search",params:{repo:this.repo,keyword:this.keyword}})},defaultRepoKey:function(){return j.defaultRepoKey()},resumeRepo:function(e,t){if(!e){var n=this.$cookies.get("repo");n||(n=j.defaultRepoKey(),this.$cookies.set("repo",n,1/0))}this.receiveRepo(e),t&&(this.$cookies.set("repo",e,1/0),this.$forceUpdate())},resumeUser:function(e,t){var n=this,i=this.$cookies.get("token"),s=this.$cookies.get("user")||{};e&&i!==e?(this.$cookies.set("token",e,"7d"),this.receiveToken(e),j.user().then((function(e){s.login=e.data.login,s.avatar=e.data.avatar_url+"&s=24",s.admin=t,n.$cookies.set("user",JSON.stringify(s),"7d"),n.receiveUser(s)}))):(this.receiveToken(i),this.receiveUser(s))},goHome:function(e){return e?this.$router.push({path:j.routePath(this.repo,this.file.path||this.dir),query:{dirty:!0}}):this.$router.push(j.routePath(this.repo,this.file.path||this.dir))},toggleDir:function(){this.receiveToggleDir()},toggleLogin:function(e){this.user.login?this.logout():this.goLogin(e)},goLogin:function(e){return this.$router.push({name:"login",query:{me:e,redirectUrl:window.location.origin+window.location.pathname+"?admin="+(e||"")}})},logout:function(){this.$cookies.remove("token"),this.$cookies.remove("user"),this.receiveUser({}),this.receiveToken(null)},newFile:function(){return this.receiveFile({}),this.$router.push("/add/"+this.repo+"/"+this.dir)},editFile:function(){return this.$router.push("/edit/"+this.repo+"/"+this.file.sha+"/"+this.file.path)},removeFile:function(){var e=this;if(!this.processing){var t=this.$loading();this.processing="remove",j.repo(this.repo).remove(this.file).then((function(t){return e.$success("删除成功"),e.goHome(!0)})).finally((function(){e.processing=!1,t.hide()}))}},saveFile:function(){var e=this;if(!this.processing){var t=this.$loading();this.processing="save",this.file.sha||(this.file.path=this.filePath+".md"),j.repo(this.repo).commit(this.file).then((function(t){return e.$success("保存成功"),e.goHome(!0)})).finally((function(){e.processing=!1,t.hide()}))}},discardFile:function(){this.goHome()}})},D=x,S=(n("f8ff"),n("2877")),M=Object(S["a"])(D,I,O,!1,null,"76c09a9e",null),q=M.exports,R={name:"Home",components:{Header:q}},E=R,z=(n("34a1"),Object(S["a"])(E,w,k,!1,null,"6ffbd21a",null)),A=z.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"editor-container"},[n("ul",{staticClass:"mirrormark-toolbar"},[n("li",{staticClass:"bold"},[n("a",{on:{click:function(t){return e.takeAction("bold")}}})]),n("li",{staticClass:"italicize"},[n("a",{on:{click:function(t){return e.takeAction("italicize")}}})]),n("li",{staticClass:"blockquote"},[n("a",{on:{click:function(t){return e.takeAction("blockquote")}}})]),n("li",{staticClass:"code"},[n("a",{on:{click:function(t){return e.takeAction("code")}}})]),n("li",{staticClass:"strikethrough"},[n("a",{on:{click:function(t){return e.takeAction("strikethrough")}}})]),n("li",{staticClass:"link"},[n("a",{on:{click:function(t){return e.takeAction("link")}}})]),n("li",{staticClass:"image"},[n("a",{on:{click:function(t){return e.takeAction("image")}}})]),n("li",{staticClass:"unorderedList"},[n("a",{on:{click:function(t){return e.takeAction("unorderedList")}}})]),n("li",{staticClass:"orderedList"},[n("a",{on:{click:function(t){return e.takeAction("orderedList")}}})]),n("li",{staticClass:"preview"},[n("a",{on:{click:function(t){return e.takeAction("preview")}}})])]),n("codemirror",{ref:"editor",attrs:{options:e.options,events:["drop"]},on:{drop:e.upload},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.preview,expression:"preview"}],staticClass:"editor-preview markdown-body",domProps:{innerHTML:e._s(e.markdown)}}),n("div",{staticClass:"fixed"},[n("a",{class:e.preview&&e.edit&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("all")}}},[e._v("Edit & Preview")]),n("a",{class:!e.preview&&e.edit&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("edit")}}},[e._v("Edit Only")]),n("a",{class:!e.edit&&e.preview&&"active",attrs:{href:"#"},on:{click:function(t){return e.changeMode("preview")}}},[e._v("Preview Only")])])])},T=[],U=(n("8449"),n("55dd"),n("8f94")),K=(n("959b"),n("44a0"),n("9f09"),n("9eb9"),n("0e54")),L=n.n(K),H=n("c197"),F=n.n(H);n("19fe"),n("43bf");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L.a.setOptions({renderer:new L.a.Renderer,highlight:function(e,t,n){var i=F.a.languages[t]||F.a.languages.autoit;return F.a.highlight(e,i)},gfm:!0,breaks:!1});var Y={name:"editor",components:{codemirror:U["codemirror"]},computed:J({},Object($["c"])(["file"])),props:{repo:String,path:String},data:function(){return{editorHeight:0,edit:!0,preview:!0,markdown:null,content:null,editor:null,options:{tabSize:4,mode:"text/x-gfm",lineNumbers:!0,line:!0,lineWrapping:!0,theme:"mirrormark",viewportMargin:1/0}}},watch:{path:function(){this.content="",this.loadContent()},content:function(e,t){this.markdown=L()(e),this.file.text=e,this.receiveFile(this.file)}},mounted:function(){this.editor=this.$refs.editor.codemirror,this.path&&this.loadContent()},methods:J(J({},Object($["b"])(["receiveFile"])),{},{loadContent:function(){var e=this;return j.repo(this.repo).contents(this.path,"raw").then((function(t){return e.content=t.data,t}))},changeMode:function(e){e&&"edit"===e?(this.edit=!0,this.preview=!1):e&&"preview"===e?(this.edit=!1,this.preview=!0):(this.edit=!0,this.preview=!0)},upload:function(e,t){if(/image\/.+$/.test(t.dataTransfer.files[0].type)){this.text="!["+t.dataTransfer.files[0].name+"]("+t.dataTransfer.files[0].webkitRelativePath+")";var n=e.coordsChar({left:t.x,top:t.y});e.replaceRange(this.text,n)}},insert:function(e){var t=this.editor.getDoc(),n=t.getCursor();t.replaceRange(e,{line:n.line,ch:n.ch})},insertAround:function(e,t){var n=this.editor.getDoc(),i=n.getCursor();if(n.somethingSelected()){var s=n.getSelection();n.replaceSelection(e+s+t)}else n.replaceRange(e+t,{line:i.line,ch:i.ch}),n.setCursor({line:i.line,ch:i.ch+e.length})},insertBefore:function(e,t){var n=this.editor.getDoc(),i=n.getCursor();if(n.somethingSelected()){var s=n.listSelections();s.forEach((function(i){for(var s=[i.head.line,i.anchor.line].sort(),o=s[0];o<=s[1];o++)n.replaceRange(e,{line:o,ch:0});n.setCursor({line:s[0],ch:t||0})}))}else n.replaceRange(e,{line:i.line,ch:0}),n.setCursor({line:i.line,ch:t||0})},takeAction:function(e){switch(e){case"bold":this.insertAround("**","**");break;case"italicize":this.insertAround("*","*");break;case"strikethrough":this.insertAround("~~","~~");break;case"code":this.insertAround("```\r\n","\r\n```");break;case"blockquote":this.insertBefore("> ",2);break;case"orderedList":this.insertBefore("1. ",3);break;case"unorderedList":this.insertBefore("* ",2);break;case"image":this.insertBefore("![](http://)",2);break;case"link":this.insertAround("[","](http://)");break;case"hr":this.insert("---");break}}})},G=Y,W=(n("9dbc"),Object(S["a"])(G,N,T,!1,null,"32d9e25a",null)),Q=W.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container fluid-container"},[n("div",{staticClass:"search-panel markdown-body"},[e._l(e.searchItems,(function(t){return[n("div",{staticClass:"search-header"},[n("pre",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(n){return e.showFile(t.path)}}},[e._v(e._s(t.name))])]),e._l(t["text_matches"],(function(t){return[n("pre",{staticClass:"matchText",domProps:{innerHTML:e._s(e.pretty(t.fragment,t.matches))}})]}))],2)]})),e.loading||0!==e.searchItems.length?e._e():n("div",{staticClass:"search-header"},[e._v("\n            未找到任何结果\n        ")]),e.incompleteResults?n("div",{staticClass:"search-footer"},[e.loading?n("pre",[n("span",[e._v("查找中... ")]),e._v(" ")]):n("pre",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.more()}}},[e._v("查看更多")])])]):e._e()],2)])},X=[],Z={name:"SearchPanel",props:{repo:String},data:function(){return{loading:!1,query:{q:null,page:1,perPage:10},searchItems:[],incompleteResults:!1}},mounted:function(){this.query.q=this.$route.params.keyword,this.query.page=1,this.query.perPage=10,this.search()},watch:{"$route.params.keyword":function(e){this.query.q=e,this.query.page=1,this.query.perPage=10,this.searchItems=[],this.search()}},methods:{search:function(){var e=this;return this.loading=!0,j.repo(this.repo).search(this.query).then((function(t){e.searchItems=e.searchItems.concat(t.data.items),e.incompleteResults=e.searchItems.length!==t.data.total_count})).finally((function(){e.loading=!1}))},more:function(){return this.query.page++,this.search()},showFile:function(e){this.$router.push(j.routePath(this.repo,e))},pretty:function(e,t){for(var n="",i=0,s=null,o=0;o<t.length;o++)s=t[o],n+=e.substring(i,s.indices[0])+"<span class='pl-k'>"+s.text+"</span>",i=s.indices[1];return n+e.substring(i)}}},ee=Z,te=(n("66b8"),Object(S["a"])(ee,V,X,!1,null,"b5301da6",null)),ne=te.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-tab"},[e._l(e.componentList,(function(t){return[n("keep-alive",[e.repoKey===t.repoKey?n("ArticlePanel",{key:t.repoKey,attrs:{repo:t.repoKey,path:e.path}}):e._e()],1)]}))],2)},se=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container fluid-container"},[n("div",{staticClass:"entry-list",class:e.showDir?"entry-fixed":"entry-hidden",on:{click:function(t){return e.receiveToggleDir()},touchmove:function(e){e.preventDefault()}}},[n("DirectoryPanel",{attrs:{loading:e.loading,items:e.items,path:e.path,repo:e.repo}}),e.showDir?n("div",{staticClass:"mask-bottom"}):e._e()],1),n("div",{staticClass:"entry-body"},[e.preview?[n("ArticleBodyPanel",{attrs:{preview:e.preview,repo:e.repo,path:e.path}})]:[n("span",[e._v(e._s(e.loading?"加载中...":"markdown预览"))])]],2)])},re=[],ae=(n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"entry-box"},[n("li",{staticClass:"entry",class:{active:e.loadingParentDir(),disabled:""===e.dir},on:{click:function(t){return t.stopPropagation(),e.parentDir()}}},[n("div",{staticClass:"entry-body"},[e.loadingParentDir()?n("div",{staticClass:"entry-indicator"},[n("Loading")],1):e._e(),e._v("\n            "+e._s(e.dir?"返回上一层":"根目录")+"\n        ")]),n("div",{staticClass:"entry-footer"},[e._v("\n            "+e._s(e.dir||"..."))])]),e._l(e.items,(function(t){return n("li",{staticClass:"entry",class:{active:t.path===e.path},on:{click:function(n){return n.stopPropagation(),e.processItem(t)}}},[n("div",{staticClass:"entry-body"},[e.loading&&t.path===e.path?n("div",{staticClass:"entry-indicator"},[n("Loading")],1):e._e(),e._v("\n            "+e._s(t.name)+"\n        ")]),"file"===t.type?n("div",{staticClass:"entry-footer"},[e._v(e._s(t.size)+" byte")]):e._e(),"dir"===t.type?n("div",{staticClass:"entry-footer"},[e._v("目录")]):e._e()])}))],2)}),ce=[],ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader simple-circle"})},le=[],de={name:"Loading"},pe=de,fe=(n("694c"),Object(S["a"])(pe,ue,le,!1,null,"46b33e49",null)),he=fe.exports;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={name:"DirectoryPanel",components:{Loading:he},props:{repo:String,path:String,items:Array,loading:Boolean},computed:be({},Object($["c"])(["dir","file"])),methods:be(be({},Object($["b"])(["receiveToggleDir"])),{},{redirect:function(e){this.path!==e&&this.$router.push(j.routePath(this.repo,e))},loadingParentDir:function(){var e=this;return this.loading&&function(){if(null===e.items)return!0;for(var t=0;t<e.items.length;t++)if(e.items[t].path===e.path)return!1;return!0}()},parentDir:function(){this.dir&&!this.loading&&this.redirect(j.parentDir(this.dir))},processItem:function(e){this.loading||(this.receiveToggleDir(),this.redirect(e.path))}})},ge=ve,ye=(n("bbba"),Object(S["a"])(ge,ae,ce,!1,null,"311c3910",null)),Ce=ye.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-body"},[n("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.preview)}}),n("IssuePanel",{attrs:{repo:e.repo,path:e.path}})],1)},we=[],ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticClass:"issue-header"},[e._v("评论")]),n("div",{staticClass:"issue-form"},[n("div",{staticClass:"issue-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newIssue.title,expression:"newIssue.title"}],staticClass:"issue-input",attrs:{placeholder:"输入问题..."},domProps:{value:e.newIssue.title},on:{input:function(t){t.target.composing||e.$set(e.newIssue,"title",t.target.value)}}})]),n("div",{staticClass:"issue-body"},[n("EditableDiv",{staticClass:"issue-input",model:{value:e.newIssue.body,callback:function(t){e.$set(e.newIssue,"body",t)},expression:"newIssue.body"}})],1),n("div",{staticClass:"issue-action"},[n("button",{staticClass:"submit-btn",attrs:{disabled:"createIssue"===e.processing||!e.newIssue.title||!e.newIssue.body},on:{click:function(t){return e.createIssue()}}},[e._v("评论")])])]),n("div",{staticClass:"issue-list"},[e._l(e.issues,(function(t,i){return n("div",{staticClass:"issue-item"},[n("div",{staticClass:"issue-avatar",style:{backgroundImage:"url("+t.node.author.avatarUrl+"&s=42)"}}),n("div",{staticClass:"issue-box"},[e.updatedIssue.id===t.node.id?[n("div",{staticClass:"issue-box-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedIssue.title,expression:"updatedIssue.title"}],staticClass:"issue-input",attrs:{placeholder:"输入问题..."},domProps:{value:e.updatedIssue.title},on:{input:function(t){t.target.composing||e.$set(e.updatedIssue,"title",t.target.value)}}})]),n("div",{staticClass:"issue-box-body"},[n("EditableDiv",{staticClass:"issue-input",model:{value:e.updatedIssue.body,callback:function(t){e.$set(e.updatedIssue,"body",t)},expression:"updatedIssue.body"}})],1),n("div",{staticClass:"issue-box-footer"},[n("span",{staticClass:"pull-right"},[n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyIssue"===e.processing||!e.updatedIssue.title||!e.updatedIssue.body},on:{click:function(t){return e.modifyIssue()}}},[e._v("提交")]),n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyIssue"===e.processing},on:{click:function(t){return e.toModifyIssue(null)}}},[e._v("取消")])])])]:[n("div",{staticClass:"issue-box-title"},[n("span",{staticClass:"issue-username"},[e._v(e._s(t.node.author.login)+" ")]),e._v(e._s(t.node.title))]),n("div",{staticClass:"issue-box-body"},[e._v(e._s(t.node.body))]),n("div",{staticClass:"issue-box-footer"},[e._v("\n                        "+e._s(new Date(t.node.createdAt).toLocaleString())+"\n                        "),n("span",{staticClass:"pull-right"},[n("a",{staticClass:"issue-button",on:{click:function(n){e.replyIssueId=t.node.id}}},[e._v("回复("+e._s(t.node.comments.totalCount)+")")]),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.toModifyIssue(t.node)}}},[e._v("修改")]):e._e(),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.removeIssue(t.node.id)}}},[e._v("删除")]):e._e()])])],n("div",{staticClass:"issue-comment-list"},[e.replyIssueId===t.node.id?n("div",{staticClass:"issue-box-reply"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newComment.body,expression:"newComment.body"}],staticClass:"issue-reply-input issue-input",attrs:{autofocus:"",placeholder:"回复"+t.node.author.login+"..."},domProps:{value:e.newComment.body},on:{input:function(t){t.target.composing||e.$set(e.newComment,"body",t.target.value)}}}),n("button",{staticClass:"submit-btn issue-reply-button",attrs:{disabled:"createComment"===e.processing||!e.newComment.body},on:{click:function(n){return e.createComment(i,t.node.id)}}},[e._v("回复")])]):e._e(),e._l(t.node.comments.nodes,(function(s){return n("div",{staticClass:"issue-comment-item"},[n("div",{staticClass:"issue-avatar",style:{backgroundImage:"url("+s.author.avatarUrl+"&s=42)"}}),n("div",{staticClass:"issue-box"},[e.updatedComment.id===s.id?[n("div",{staticClass:"issue-box-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedComment.body,expression:"updatedComment.body"}],staticClass:"issue-input",attrs:{placeholder:"输入回复..."},domProps:{value:e.updatedComment.body},on:{input:function(t){t.target.composing||e.$set(e.updatedComment,"body",t.target.value)}}})]),n("div",{staticClass:"issue-box-footer"},[n("span",{staticClass:"pull-right"},[n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyComment"===e.processing||!e.updatedComment.body},on:{click:function(n){return e.modifyComment(i,t.node.id,s.id)}}},[e._v("提交")]),n("button",{staticClass:"issue-reply-button submit-btn",attrs:{disabled:"modifyComment"===e.processing},on:{click:function(t){return e.toModifyComment(null)}}},[e._v("取消")])])])]:[n("div",{staticClass:"issue-box-title"},[n("span",{staticClass:"issue-username"},[e._v(e._s(s.author.login)+" ")])]),n("div",{staticClass:"issue-box-body"},[e._v(e._s(s.body))]),n("div",{staticClass:"issue-box-footer"},[e._v("\n                                    "+e._s(new Date(s.createdAt).toLocaleString())+"\n                                    "),n("span",{staticClass:"pull-right"},[e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(t){return e.toModifyComment(s)}}},[e._v("修改")]):e._e(),e.user.admin?n("a",{staticClass:"issue-button",on:{click:function(n){return e.removeComment(i,t.node.id,s.id)}}},[e._v("删除")]):e._e()])])]],2)])}))],2),t.node.comments.pageInfo.hasNextPage?n("div",{staticClass:"fetch-more-issue-comment",on:{click:function(n){return e.loadMoreComment(i,t.node.id,t.node.comments.pageInfo.endCursor)}}},[e._v("\n                    "+e._s(e.processing==="listComment"+t.node.id?"加载中...":"查看更多")+"\n                ")]):e._e()],2)])})),e.pageInfo.hasNextPage?n("div",{staticClass:"fetch-more-issue",on:{click:function(t){return e.loadMoreIssue(e.pageInfo.endCursor)}}},[e._v("  "+e._s("listIssue"===e.processing?"加载中...":"查看更多"))]):e._e()],2)])},Ie=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"editable",attrs:{tabindex:"-1",contenteditable:""},on:{input:e.handleInput}})},$e=[],_e={props:["value"],mounted:function(){this.$refs.editable.innerText=this.value},data:function(){return{internal:!0}},methods:{handleInput:function(e){this.internal=!0,this.$emit("input",this.$refs.editable.innerText)}},watch:{value:{immediate:!0,handler:function(e,t){this.internal||(this.$refs.editable.innerText=e),this.internal=!1}}}},Pe=_e,xe=Object(S["a"])(Pe,Oe,$e,!1,null,null,null),De=xe.exports;function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe={name:"IssuePanel",components:{EditableDiv:De},props:{path:String,repo:String},data:function(){return{processing:!1,issues:[],pageInfo:{},totalCount:null,replyIssueId:null,newIssue:{title:null,body:null},updatedIssue:{id:null,title:null,body:null},newComment:{body:null},updatedComment:{id:null,body:null}}},computed:Me({},Object($["c"])(["dir","file","user"])),created:function(){},beforeDestroy:function(){},mounted:function(){this.refresh()},watch:{path:function(e,t){this.refresh()},repo:function(e,t){this.refresh()}},methods:Me(Me({},Object($["b"])(["receiveFile","receiveDir"])),{},{requiredLogin:function(){if(!this.user.login)throw this.$fail("请先登录github账号!"),Error("login required")},refresh:function(){var e=this;this.newIssue={title:null,body:null},this.updatedIssue={id:null,title:null,body:null},this.newComment={body:null},this.updatedComment={id:null,body:null},j.repo(this.repo).issues(this.path).then((function(t){e.issues=t.repository.issues.edges,e.pageInfo=t.repository.issues.pageInfo,e.totalCount=t.repository.issues.totalCount}))},loadMoreIssue:function(e){var t=this;this.processing="listIssue",j.repo(this.repo).issues(this.path,e).then((function(e){t.issues=t.issues.concat(e.repository.issues.edges),t.pageInfo=e.repository.issues.pageInfo,t.totalCount=e.repository.issues.totalCount})).catch((function(e){t.$fail(e.message)})).finally((function(e){t.processing=!1}))},createIssue:function(){var e=this;this.requiredLogin(),this.processing="createIssue",j.repo(this.repo).createIssue(this.path,this.newIssue.title,this.newIssue.body).then((function(t){e.$success("评论成功"),e.refresh()})).catch((function(t){e.$fail(t.message)})).finally((function(){e.processing=!1}))},toModifyIssue:function(e){e?(this.updatedIssue.id=e.id,this.updatedIssue.title=e.title,this.updatedIssue.body=e.body):this.updatedIssue={id:null,title:null,body:null}},modifyIssue:function(){var e=this;this.processing="modifyIssue",j.repo(this.repo).updateIssue(this.updatedIssue.id,this.updatedIssue.title,this.updatedIssue.body).then((function(t){e.$success("评论修改成功"),e.refresh()})).catch((function(t){e.$fail(t.message)})).finally((function(){e.processing=!1}))},removeIssue:function(e){var t=this;this.$confirm("此操作将永久删除评论, 是否继续?",(function(){return t.processing="deleteIssue",j.repo(t.repo).deleteIssue(e).then((function(e){t.$success("删除成功!"),t.refresh()})).catch((function(e){t.$fail(e.message)})).finally((function(){t.processing=!1}))}))},loadMoreComment:function(e,t,n){var i=this;this.processing="listComment"+t,j.repo(this.repo).issueComments(t,n).then((function(t){var s=i.issues[e].node.comments.nodes;n&&s?i.$set(i.issues[e].node.comments,"nodes",s.concat(t.node.comments.nodes)):i.$set(i.issues[e].node.comments,"nodes",t.node.comments.nodes),i.$set(i.issues[e].node.comments,"totalCount",t.node.comments.totalCount),i.$set(i.issues[e].node.comments,"pageInfo",t.node.comments.pageInfo)})).catch((function(e){i.$fail(e.message)})).finally((function(){i.processing=!1}))},createComment:function(e,t){var n=this;this.requiredLogin(),this.processing="createComment",j.repo(this.repo).createIssueComment(t,this.newComment.body).then((function(i){n.$success("回复成功"),n.newComment.body=null,n.loadMoreComment(e,t)})).catch((function(e){n.$fail(e.message)})).finally((function(){n.processing=!1}))},toModifyComment:function(e){e?(this.updatedComment.id=e.id,this.updatedComment.body=e.body):this.updatedComment={id:null,body:null}},modifyComment:function(e,t,n){var i=this;this.processing="modifyComment",j.repo(this.repo).updateIssueComment(n,this.updatedComment.body).then((function(n){i.$success("修改成功"),i.updatedComment.id=null,i.updatedComment.body=null,i.loadMoreComment(e,t)})).catch((function(e){i.$fail(e.message)})).finally((function(){i.processing=!1}))},removeComment:function(e,t,n){var i=this;this.$confirm("此操作将永久删除回复, 是否继续?",(function(){return i.processing="removeComment",j.repo(i.repo).deleteIssueComment(n).then((function(n){i.$success("删除成功!"),i.loadMoreComment(e,t)})).catch((function(e){i.$fail(e.message)})).finally((function(){i.processing=!1}))}))}})},Re=qe,Ee=(n("537b"),Object(S["a"])(Re,ke,Ie,!1,null,"4809f407",null)),ze=Ee.exports,Ae={name:"ArticleBodyPanel",components:{IssuePanel:ze},props:{preview:String,repo:String,path:String}},Ne=Ae,Te=Object(S["a"])(Ne,je,we,!1,null,"de8603cc",null),Ue=Te.exports;function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He={name:"ArticlePanel",components:{ArticleBodyPanel:Ue,DirectoryPanel:Ce},props:{path:String,repo:String},data:function(){return{loading:!1,items:null,preview:null,state:null}},computed:Le({},Object($["c"])(["dir","file","repoKey","showDir"])),beforeDestroy:function(){},mounted:function(){var e=this;this.refresh(this.path).then((function(){e.restoreHash()}))},activated:function(){this.state&&(this.receiveFile(this.state.file),this.receiveDir(this.state.dir)),this.$route.query.dirty&&this.refresh(this.path,!0)},deactivated:function(){this.state={},this.state.file=this.file,this.state.dir=this.dir,this.receiveHistory([this.repo,this.path])},watch:{path:function(e,t){this.refresh(e)},"$route.hash":function(){this.restoreHash()}},methods:Le(Le({},Object($["b"])(["receiveFile","receiveDir","receiveHistory","receiveToggleDir"])),{},{refresh:function(e,t){return this.showContent(e||"",t)},restoreHash:function(){if(this.$route.hash){var e=document.querySelector("[href='"+decodeURIComponent(this.$route.hash)+"']");if(e){var t=e.offsetTop,n=t-16;window.scrollTo({top:n,behavior:"smooth"})}}},markedItem:function(e){this.receiveFile(this.items.find((function(t){return t.path===e})))},showContent:function(e,t){var n=this,i=null;return this.loading=!0,j.repo(this.repo).contents(e).then((function(s){if("file"===s.type){if(n.preview=s.data,i=j.parentDir(e),t||i!==n.dir||null===n.items)return n.showContent(i).then((function(t){return n.markedItem(e),t}));n.markedItem(e)}else n.items=s.data,i=e;return n.receiveDir(i),s})).catch((function(i){if(n.preview=i.message,t)return n.showContent(j.parentDir(e))})).finally((function(){n.loading=!1}))}})},Fe=He,Be=(n("ca58"),Object(S["a"])(Fe,oe,re,!1,null,"5d5e5324",null)),Je=Be.exports;function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We={components:{ArticlePanel:Je},props:{path:String,repo:String},data:function(){return{componentList:this.articleList()}},computed:Ge({},Object($["c"])(["repoKey"])),methods:{articleList:function(){var e=[],t=j.repos();for(var n in t)if(t.hasOwnProperty(n)&&"article"===t[n].type){var i={};i.name=t[n].name,i.repoKey=n,e.push(i)}return e}}},Qe=We,Ve=Object(S["a"])(Qe,ie,se,!1,null,null,null),Xe=Ve.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container notebook-container"},[e._l(e.notes,(function(t,i){return n("div",{staticClass:"metro-box u-drag-content text-box"},[n("div",{staticClass:"metro-style-bg"},[n("div",{staticClass:"outline"},[n("em",{staticClass:"triangle"}),n("div",{directives:[{name:"show",rawName:"v-show",value:i===e.editable,expression:"index === editable"}],staticClass:"content-wrapper editable"},[n("EditableDiv",{staticClass:"content",attrs:{id:i},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"note.text"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:i!==e.editable,expression:"index !== editable"}],staticClass:"content-wrapper"},[n("div",{staticClass:"content"},[e._v(e._s(t.text))])])]),n("div",{staticClass:"note-footer"},[n("span",{staticClass:"note-time"},[e._v(" "+e._s(e.moment(new Date(parseInt(t.path))).format("YYYY-MM-DD HH:mm:ss")))]),n("div",{staticClass:"note-icons"},[i===e.editable?[n("span",{staticClass:"iconfont icon-baocun",on:{click:function(n){return e.save(i,t)}}}),n("span",{staticClass:"iconfont icon-chexiao",on:{click:function(t){return e.undo(i)}}})]:[n("span",{staticClass:"iconfont icon-bianjibiaoge",on:{click:function(n){return e.modify(i,t)}}}),n("span",{staticClass:"iconfont icon-shanchu",on:{click:function(n){return e.remove(i,t)}}})]],2)])])])})),n("div",{staticClass:"metro-box u-drag-content text-box"},[n("div",{staticClass:"metro-style-bg"},[n("div",{staticClass:"outline"},[n("em",{staticClass:"triangle"}),n("div",{directives:[{name:"show",rawName:"v-show",value:-1===e.editable,expression:"-1 === editable"}],staticClass:"content-wrapper editable"},[n("EditableDiv",{staticClass:"content",attrs:{id:"-1"},model:{value:e.newNote.text,callback:function(t){e.$set(e.newNote,"text",t)},expression:"newNote.text"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:-1!==e.editable,expression:"-1 !== editable"}],staticClass:"content-wrapper"},[n("span",{staticClass:"iconfont icon-jiahao icon-new",on:{click:function(t){return e.modify(-1)}}})])]),-1===e.editable?n("div",{staticClass:"note-footer"},[n("div",{staticClass:"note-icons"},[n("span",{staticClass:"iconfont icon-baocun",on:{click:function(t){return e.save(-1,e.newNote)}}}),n("span",{staticClass:"iconfont icon-chexiao",on:{click:function(t){return e.undo(-1)}}})])]):e._e()])])],2)},et=[],tt={name:"NotePanel",props:{repo:String,path:String},components:{EditableDiv:De},data:function(){return{editable:!1,notes:[],newNote:{path:null,text:null},currNote:null}},mounted:function(){this.lists()},methods:{lists:function(){var e=this;return j.repo(this.repo).listNotes().then((function(t){t.repository&&t.repository.object.entries&&(e.notes=[],t.repository.object.entries.forEach((function(t){var n={};n.sha=t.object.oid,n.path=t.name,n.text=t.object.text,e.notes.push(n)})))}))},undo:function(e){-1===e?this.newNote=this.currNote:this.notes[e]=this.currNote,this.editable=!1},save:function(e,t){var n=this;t.sha||(t.path=(new Date).getTime());var i=this.$loading();j.repo(this.repo).commit(t).then((function(i){t.sha=i.data.content.sha,n.editable=!1,-1===e?(n.undo(-1),n.lists().then((function(e){n.$success("保存成功")})).finally((function(e){}))):n.$success("编辑成功")})).catch((function(t){n.$fail(t),n.undo(e)})).finally((function(){i.hide()}))},modify:function(e,t){!1!==this.editable&&this.undo(this.editable),this.editable=e,this.currNote=t&&JSON.parse(JSON.stringify(t))||{path:null,text:null},this.$nextTick((function(){document.getElementById(e).focus()}))},remove:function(e,t){var n=this;this.$confirm("删除笔记"+t.path+", 是否继续?",(function(){var e=n.$loading();j.repo(n.repo).remove(t).then((function(){n.$success("删除成功"),n.lists().then((function(){})).finally((function(e){}))})).catch((function(e){n.$fail(e)})).finally((function(){e.hide()}))}))}}},nt=tt,it=(n("d8ea"),n("fa0a"),Object(S["a"])(nt,Ze,et,!1,null,"7586b744",null)),st=it.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},rt=[],at={name:"Login",mounted:function(){if(this.$route.query.me){var e="client_id="+j.preset("oauthAppsClientId");window.location="https://github.com/login/oauth/authorize?"+e+"&redirect_uri="+encodeURIComponent(this.authorizeUrl(e))+"&scope=repo&login="+j.preset("owner")+"&state="+Math.floor(1e5*Math.random())}else{var t="client_id="+j.preset("githubAppsClientId");window.location="https://github.com/login/oauth/authorize?"+t+"&redirect_uri="+encodeURIComponent(this.authorizeUrl(t))+"&state="+Math.floor(1e5*Math.random())}},methods:{authorizeUrl:function(e){return j.preset("authorizeUrl")+"?"+e+"&redirect_uri="+encodeURIComponent(this.$route.query.redirectUrl||"")}}},ct=at,ut=Object(S["a"])(ct,ot,rt,!1,null,"5150aab2",null),lt=ut.exports;i["a"].use(o["a"]);var dt=new o["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:j.routePath()},{path:"/",component:A,children:[{name:"note",path:"/note/:repo("+j.notePathReg()+")",component:st},{name:"article",path:"/article/:repo("+j.markdownPathReg()+")/:path*",component:Xe},{path:"/edit/:repo("+j.markdownPathReg()+")/:sha/:path*",component:Q,name:"editor"},{path:"/add/:repo("+j.markdownPathReg()+")/:mkdir*",component:Q,name:"editor"},{name:"search",path:"/search/:repo("+j.markdownPathReg()+")/:keyword",component:ne},{name:"login",path:"/login",component:lt}]}]});i["a"].use($["a"]);var pt={token:null,user:{},repo:{},repoKey:null,file:{},dir:"",history:{},showDir:!1},ft={receiveFile:function(e,t){e.file=t},receiveDir:function(e,t){e.dir=t},receiveUser:function(e,t){e.user=t},receiveRepo:function(e,t){e.repoKey=t,e.repo=j.getRepo(t)},receiveToken:function(e,t){e.token=t,j.authorized(t)},receiveHistory:function(e,t){e.history[t[0]]=t[1]},receiveMobile:function(e,t){e.mobile=t},receiveToggleDir:function(e,t){e.showDir=!e.showDir}},ht={},mt=new $["a"].Store({state:pt,mutations:ft,actions:ht}),bt=n("2b27"),vt=n.n(bt),gt=n("c1df"),yt=n.n(gt),Ct=(n("0540"),n("57c4")),jt=n.n(Ct);i["a"].prototype.moment=yt.a,i["a"].prototype.$loading=jt.a.loading,i["a"].prototype.$success=jt.a.toast,i["a"].prototype.$confirm=jt.a.confirm,i["a"].prototype.$fail=jt.a.alert,i["a"].prototype.$actionSheet=jt.a.actionSheet,i["a"].use(vt.a),i["a"].config.productionTip=!1,new i["a"]({router:dt,store:mt,render:function(e){return e(s["default"])}}).$mount("#app")},"5f49":function(e,t,n){},"64a9":function(e,t,n){},"65e5":function(e,t,n){},"66b8":function(e,t,n){"use strict";var i=n("6d48"),s=n.n(i);s.a},"694c":function(e,t,n){"use strict";var i=n("7bc9"),s=n.n(i);s.a},"6d48":function(e,t,n){},"7bc9":function(e,t,n){},"9af9":function(e,t,n){},"9dbc":function(e,t,n){"use strict";var i=n("15cb"),s=n.n(i);s.a},bbba:function(e,t,n){"use strict";var i=n("4df1"),s=n.n(i);s.a},ca58:function(e,t,n){"use strict";var i=n("fac1"),s=n.n(i);s.a},d8ea:function(e,t,n){"use strict";var i=n("9af9"),s=n.n(i);s.a},e545:function(e,t,n){},e66e:function(e,t,n){},f8ff:function(e,t,n){"use strict";var i=n("e545"),s=n.n(i);s.a},fa0a:function(e,t,n){"use strict";var i=n("e66e"),s=n.n(i);s.a},fac1:function(e,t,n){}}]);
//# sourceMappingURL=chunk-common.2ed64241.js.map